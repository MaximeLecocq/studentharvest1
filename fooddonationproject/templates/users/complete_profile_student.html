{% extends 'base.html' %}
{% load static %}
{% block title %}Complete My Profile{% endblock %}

{% block content %}
    <section class="py-10 px-6 mx-auto max-w-4xl">
        <div class="flex flex-col lg:flex-row bg-white rounded-lg">
            <!-- avatar section -->
            <div class="lg:w-1/3 flex items-center justify-center p-6 lg:border-r lg:border-gray-300">
                <div class="flex flex-col items-center">
                    <h3 class="text-xl font-semibold mb-4 text-gray-800">Your Avatar:</h3>
                    {% if user.avatar %}
                        <img src="{{ user.avatar.url }}" alt="{{ user.username }}'s Avatar" class="w-40 h-40 object-cover rounded-full">
                    {% else %}
                        <img src="{% static 'images/avatars/avatarplaceholder.jpg' %}" alt="Avatar Placeholder" class="w-40 h-40 object-cover rounded-full">
                    {% endif %}
                </div>
            </div>

            <!-- profile form section -->
            <div class="lg:w-2/3 p-6">
                <h2 class="text-3xl font-semibold mb-6 text-gray-900">Complete Your Student Profile</h2>

                <form method="post" enctype="multipart/form-data" class="space-y-6">
                    {% csrf_token %}

                    <!-- first name -->
                    <div class="relative mb-6">
                        {{ form.first_name.label_tag }}
                        {{ form.first_name }}
                        {% if form.first_name.errors %}
                            <div class="text-red-600 text-sm mt-1">{{ form.first_name.errors }}</div>
                        {% endif %}
                    </div>

                    <!-- last name -->
                    <div class="relative mb-6">
                        {{ form.last_name.label_tag }}
                        {{ form.last_name }}
                        {% if form.last_name.errors %}
                            <div class="text-red-600 text-sm mt-1">{{ form.last_name.errors }}</div>
                        {% endif %}
                    </div>

                    <!-- phone number -->
                    <div class="relative mb-6">
                        {{ form.phone_number.label_tag }}
                        {{ form.phone_number }}
                        {% if form.phone_number.errors %}
                            <div class="text-red-600 text-sm mt-1">{{ form.phone_number.errors }}</div>
                        {% endif %}
                    </div>

                    <!-- street address -->
                    <div class="relative mb-6">
                        {{ form.street_address.label_tag }}
                        {{ form.street_address }}
                        {% if form.street_address.errors %}
                            <div class="text-red-600 text-sm mt-1">{{ form.street_address.errors }}</div>
                        {% endif %}
                    </div>

                    <!-- city/town -->
                    <div class="relative mb-6">
                        {{ form.city_town.label_tag }}
                        {{ form.city_town }}
                        {% if form.city_town.errors %}
                            <div class="text-red-600 text-sm mt-1">{{ form.city_town.errors }}</div>
                        {% endif %}
                    </div>

                    <!-- about/introduction section -->
                    <div class="relative mb-6">
                        {{ form.about.label_tag }}
                        {{ form.about }}
                        {% if form.about.errors %}
                            <div class="text-red-600 text-sm mt-1">{{ form.about.errors }}</div>
                        {% endif %}
                    </div>

                    <!-- student card -->
                    <div class="relative mb-6">
                        {{ form.student_card.label_tag }}
                        {{ form.student_card }}
                        {% if form.student_card.errors %}
                            <div class="text-red-600 text-sm mt-1">{{ form.student_card.errors }}</div>
                        {% endif %}
                    </div>

                    <!-- avatar upload -->
                    <div class="relative mb-6">
                        {{ form.avatar.label_tag }}
                        {{ form.avatar }}
                        {% if form.avatar.errors %}
                            <div class="text-red-600 text-sm mt-1">{{ form.avatar.errors }}</div>
                        {% endif %}
                    </div>

                    <!-- submit button -->
                    <div class="flex justify-center">
                        <button type="submit" class="w-full bg-indigo-600 text-white font-semibold py-2 px-4 rounded-md transition duration-150 ease-in-out hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-opacity-50">
                            Save changes
                        </button>
                    </div>

                    <!-- return to profile link -->
                    <p class="text-center text-sm text-gray-600 mt-4">
                        <a href="{% url 'profile' %}" class="text-indigo-600 hover:text-indigo-500">Return to Profile</a>
                    </p>
                </form>
            </div>
        </div>
    </section>
{% endblock %}
